{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user01\\\\Desktop\\\\Ben\\\\Sea_Level_Dash\\\\Sea_Level_Dash_app\\\\ScriptVersions\\\\Sea_Level_Dashboard_Aws Ver_04_08_25\\\\frontend\\\\src\\\\components\\\\OSMMap.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/OSMMap.js - Fixed version without loops\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in React\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png'\n});\nconst OSMMap = ({\n  stations,\n  currentStation,\n  mapData\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef({});\n\n  // Station coordinates (Israel)\n  const stationCoordinates = {\n    'Acre': [32.9269, 35.0818],\n    'Ashdod': [31.8044, 34.6553],\n    'Ashkelon': [31.6658, 34.5664],\n    'Eilat': [29.5581, 34.9482],\n    'Haifa': [32.8191, 34.9983],\n    'Yafo': [32.0535, 34.7503]\n  };\n\n  // Initialize map once\n  useEffect(() => {\n    if (!mapRef.current || mapInstanceRef.current) return;\n    try {\n      mapInstanceRef.current = L.map(mapRef.current).setView([31.5, 34.8], 7);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors',\n        maxZoom: 18\n      }).addTo(mapInstanceRef.current);\n\n      // Add initial markers\n      Object.entries(stationCoordinates).forEach(([station, coords]) => {\n        const marker = L.marker(coords).addTo(mapInstanceRef.current);\n        marker.bindTooltip(station);\n        markersRef.current[station] = marker;\n      });\n    } catch (error) {\n      console.error('Map initialization error:', error);\n    }\n  }, []);\n\n  // Update marker popups when data changes\n  useEffect(() => {\n    if (!mapInstanceRef.current || !mapData || mapData.length === 0) return;\n\n    // Debounce updates to prevent excessive re-renders\n    const timeoutId = setTimeout(() => {\n      Object.entries(markersRef.current).forEach(([station, marker]) => {\n        const stationData = mapData.find(d => d.Station === station);\n        if (stationData) {\n          var _stationData$Tab_Valu, _stationData$Tab_Valu2;\n          const popupContent = `\n            <div style=\"font-family: Arial, sans-serif; min-width: 200px;\">\n              <h4 style=\"margin: 0 0 10px 0; color: #1e6bc4;\">${station}</h4>\n              <p><strong>Sea Level:</strong> ${((_stationData$Tab_Valu = stationData.Tab_Value_mDepthC1) === null || _stationData$Tab_Valu === void 0 ? void 0 : _stationData$Tab_Valu.toFixed(3)) || 'N/A'} m</p>\n              <p><strong>Temperature:</strong> ${((_stationData$Tab_Valu2 = stationData.Tab_Value_monT2m) === null || _stationData$Tab_Valu2 === void 0 ? void 0 : _stationData$Tab_Valu2.toFixed(1)) || 'N/A'} °C</p>\n              <p><strong>Last Update:</strong> ${stationData.Tab_DateTime ? new Date(stationData.Tab_DateTime).toLocaleString() : 'N/A'}</p>\n            </div>\n          `;\n          marker.bindPopup(popupContent);\n        } else {\n          marker.bindPopup(`<h4>${station}</h4><p>No data available</p>`);\n        }\n      });\n    }, 100);\n    return () => clearTimeout(timeoutId);\n  }, [mapData]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n        markersRef.current = {};\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      width: '100%',\n      height: '500px',\n      borderRadius: '8px',\n      border: '1px solid #2a4a8c'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(OSMMap, \"M7vtHaGRmHwaQ0mWrPSJ8B08FuI=\");\n_c = OSMMap;\nexport default OSMMap;\nvar _c;\n$RefreshReg$(_c, \"OSMMap\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","OSMMap","stations","currentStation","mapData","_s","mapRef","mapInstanceRef","markersRef","stationCoordinates","current","map","setView","tileLayer","attribution","maxZoom","addTo","Object","entries","forEach","station","coords","marker","bindTooltip","error","console","length","timeoutId","setTimeout","stationData","find","d","Station","_stationData$Tab_Valu","_stationData$Tab_Valu2","popupContent","Tab_Value_mDepthC1","toFixed","Tab_Value_monT2m","Tab_DateTime","Date","toLocaleString","bindPopup","clearTimeout","remove","ref","style","width","height","borderRadius","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/user01/Desktop/Ben/Sea_Level_Dash/Sea_Level_Dash_app/ScriptVersions/Sea_Level_Dashboard_Aws Ver_04_08_25/frontend/src/components/OSMMap.js"],"sourcesContent":["// frontend/src/components/OSMMap.js - Fixed version without loops\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in React\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png'\n});\n\nconst OSMMap = ({ stations, currentStation, mapData }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef({});\n\n  // Station coordinates (Israel)\n  const stationCoordinates = {\n    'Acre': [32.9269, 35.0818],\n    'Ashdod': [31.8044, 34.6553],\n    'Ashkelon': [31.6658, 34.5664],\n    'Eilat': [29.5581, 34.9482],\n    'Haifa': [32.8191, 34.9983],\n    'Yafo': [32.0535, 34.7503]\n  };\n\n  // Initialize map once\n  useEffect(() => {\n    if (!mapRef.current || mapInstanceRef.current) return;\n\n    try {\n      mapInstanceRef.current = L.map(mapRef.current).setView([31.5, 34.8], 7);\n      \n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors',\n        maxZoom: 18\n      }).addTo(mapInstanceRef.current);\n\n      // Add initial markers\n      Object.entries(stationCoordinates).forEach(([station, coords]) => {\n        const marker = L.marker(coords).addTo(mapInstanceRef.current);\n        marker.bindTooltip(station);\n        markersRef.current[station] = marker;\n      });\n    } catch (error) {\n      console.error('Map initialization error:', error);\n    }\n  }, []);\n\n  // Update marker popups when data changes\n  useEffect(() => {\n    if (!mapInstanceRef.current || !mapData || mapData.length === 0) return;\n\n    // Debounce updates to prevent excessive re-renders\n    const timeoutId = setTimeout(() => {\n      Object.entries(markersRef.current).forEach(([station, marker]) => {\n        const stationData = mapData.find(d => d.Station === station);\n        \n        if (stationData) {\n          const popupContent = `\n            <div style=\"font-family: Arial, sans-serif; min-width: 200px;\">\n              <h4 style=\"margin: 0 0 10px 0; color: #1e6bc4;\">${station}</h4>\n              <p><strong>Sea Level:</strong> ${stationData.Tab_Value_mDepthC1?.toFixed(3) || 'N/A'} m</p>\n              <p><strong>Temperature:</strong> ${stationData.Tab_Value_monT2m?.toFixed(1) || 'N/A'} °C</p>\n              <p><strong>Last Update:</strong> ${stationData.Tab_DateTime ? new Date(stationData.Tab_DateTime).toLocaleString() : 'N/A'}</p>\n            </div>\n          `;\n          marker.bindPopup(popupContent);\n        } else {\n          marker.bindPopup(`<h4>${station}</h4><p>No data available</p>`);\n        }\n      });\n    }, 100);\n\n    return () => clearTimeout(timeoutId);\n  }, [mapData]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n        markersRef.current = {};\n      }\n    };\n  }, []);\n\n  return (\n    <div \n      ref={mapRef} \n      style={{ \n        width: '100%', \n        height: '500px',\n        borderRadius: '8px',\n        border: '1px solid #2a4a8c'\n      }} \n    />\n  );\n};\n\nexport default OSMMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}